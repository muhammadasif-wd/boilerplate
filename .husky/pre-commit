#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo 'ğŸ” Checking code quality and building your project before committing...'

# Check Prettier standards
npm run check-format ||
(
    echo 'ğŸš¨ Style Check Failed! ğŸš¨
    Please run "npm run format" to fix the issues, stage the changes, and try committing again.';
    false;
)

# Check ESLint standards
npm run check-lint ||
(
    echo 'âš ï¸ Lint Check Failed! âš ï¸
    Please fix the issues listed above, stage the changes, and try committing again.';
    false;
)

# Check TypeScript types
npm run check-types ||
(
    echo 'âŒ Type Check Failed! âŒ
    Please review the errors above, fix the issues, and try committing again.';
    false;
)

# Attempt to build the project
echo 'ğŸ”§ Running build process...'

npm run build ||
(
    echo 'â›” Build Failed! â›”
    Please check the errors above, fix the issues, and try committing again.';
    false;
)

# Success message
echo 'âœ… All checks passed! Committing your changes now... âœ…'
